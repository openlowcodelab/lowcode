@if (ComponentSchema != null)
{
    <div class="propertysetting-item">
        <label>Name <span style="font-size:10px; color:gray;">(字段名称/英文)</span>：</label>
        <Input TValue="string" Value="@ComponentSchema.ComponentPropertySchema.Name" OnChange="(value) => OnPropertyChange()" />
    </div>
    <div class="propertysetting-item">
        <label>标题：</label>
        <Input TValue="string" Value="@ComponentSchema.ComponentPropertySchema.Title" OnChange="(value) => OnPropertyChange()" />
    </div>
    <div class="propertysetting-item">
        <label>描述：</label>
        <TextArea Value="@ComponentSchema.ComponentPropertySchema.Description" />
    </div>
    @if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.DefaultValue)))
    {
        <div class="propertysetting-item">
            <label>默认值：</label>
            <Input TValue="string" Value="@ComponentSchema.ComponentPropertySchema.DefaultValue" />
        </div>
    }
    @if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.IsRequired)))
    {
        <div class="propertysetting-item">
            <label>必填：</label>
            <Checkbox Value="@ComponentSchema.ComponentPropertySchema.IsRequired" OnChange="(value) => OnPropertyChange()" />
        </div>
    }

    @*"type": "string"*@
    @if (ComponentSchema.ComponentPropertySchema.ComponentValueType == ComponentValueType.String)
    {
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.MaximumLength)))
        {
            <div class="propertysetting-item">
                <label>最大长度：</label>
                <Input TValue="long?" Value="@ComponentSchema.ComponentPropertySchema.MaximumLength" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.MinimumLength)))
        {
            <div class="propertysetting-item">
                <label>最小长度：</label>
                <Input TValue="long?" Value="@ComponentSchema.ComponentPropertySchema.MinimumLength" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.Pattern)))
        {
            <div class="propertysetting-item">
                <label>Pattern：</label>
                <Input TValue="string" Value="@ComponentSchema.ComponentPropertySchema.Pattern" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.Format)))
        {
            <div class="propertysetting-item">
                <label>Format：</label>
                <Input TValue="string" Value="@ComponentSchema.ComponentPropertySchema.Format" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
    }

    @*"type": "integer"*@
    @*"type": "number"*@
    @if (ComponentSchema.ComponentPropertySchema.ComponentValueType == ComponentValueType.Integer || ComponentSchema.ComponentPropertySchema.ComponentValueType == ComponentValueType.Number)
    {
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.Maximum)))
        {
            <div class="propertysetting-item">
                <label>最大值：</label>
                <Input TValue="double?" Value="@ComponentSchema.ComponentPropertySchema.Maximum" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
        if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.Minimum)))
        {
            <div class="propertysetting-item">
                <label>最小值：</label>
                <Input TValue="double?" Value="@ComponentSchema.ComponentPropertySchema.Minimum" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
    }
    @*"type": "array"*@
    @*if(ComponentSchema.ComponentValueType == ComponentValueType.Array)
{

}*@

    @if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.ItemWidth)))
    {
        <div class="propertysetting-item">
            <label>组件宽度：</label>
            <Slider TValue="double?" Value="@ComponentSchema.ComponentPropertySchema.ItemWidth" DefaultValue="12" Min="4" Max="24" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
    @if (ComponentSchema.IsShowProperty(nameof(ComponentSettingSchema.LabelWidth)))
    {
        <div class="propertysetting-item">
            <label>标签宽度：</label>
            <Slider TValue="double?" Value="@ComponentSchema.ComponentPropertySchema.LabelWidth" DefaultValue="180" Min="4" Max="300" OnChange="(value) => OnPropertyChange()" />
        </div>
    }

    @*自定义*@
    @if (ComponentSchema.ComponentPropertySchema.ExtensionProperties != null)
    {
        foreach (var kv in ComponentSchema.ComponentPropertySchema.ExtensionProperties)
        {
            <div class="propertysetting-item">
                <label>@kv.Value.Label：</label>
                <Input TValue="string" Value="@kv.Value.Value.ToString()" OnChange="(value) => OnPropertyChange()" />
            </div>
        }
    }
}

@code {
    [Parameter]
    public ComponentSchema ComponentSchema { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
    }

    private void OnPropertyChange()
    {
        BlazorEventDispatcher.Trigger("designengine.propertysetting.onchange", null);
    }
}
