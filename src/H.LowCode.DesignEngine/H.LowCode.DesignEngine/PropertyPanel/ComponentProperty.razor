<div class="componentproperty-item">
    <label>Name <span style="font-size:10px; color:gray;">(字段名称/英文)</span>：</label>
    <Input TValue="string" @bind-Value="@ComponentSchema.Name" OnChange="(value) => OnPropertyChange()" />
</div>
<div class="componentproperty-item">
    <label>标题：</label>
    <Input TValue="string" @bind-Value="@ComponentSchema.ComponentJsonSchema.Title" OnChange="(value) => OnPropertyChange()" />
</div>
<div class="componentproperty-item">
    <label>描述：</label>
    <Input TValue="string" @bind-Value="@ComponentSchema.ComponentJsonSchema.Description" />
</div>
<div class="componentproperty-item">
    <label>默认值：</label>
    <Input TValue="string" @bind-Value="@ComponentSchema.ComponentPropertySchema.DefaultValue" />
</div>
@if (ComponentSchema.ComponentPropertySchema.IsShowProperty("IsRequired"))
{
    <div class="componentproperty-item">
        <label>必填：</label>
        <Checkbox @bind-Value="@ComponentSchema.ComponentPropertySchema.IsRequired" OnChange="(value) => OnPropertyChange()" />
    </div>
}

@*"type": "string"*@
@if(ComponentSchema.ComponentJsonSchema.Type == JSchemaType.String)
{
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("MaximumLength"))
    {
        <div class="componentproperty-item">
            <label>最大长度：</label>
            <Input TValue="long?" @bind-Value="@ComponentSchema.ComponentJsonSchema.MaximumLength" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("MinimumLength"))
    {
        <div class="componentproperty-item">
            <label>最小长度：</label>
            <Input TValue="long?" @bind-Value="@ComponentSchema.ComponentJsonSchema.MinimumLength" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("Pattern"))
    {
        <div class="componentproperty-item">
            <label>Pattern：</label>
            <Input TValue="string" @bind-Value="@ComponentSchema.ComponentJsonSchema.Pattern" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("Format"))
    {
        <div class="componentproperty-item">
            <label>Format：</label>
            <Input TValue="string" @bind-Value="@ComponentSchema.ComponentJsonSchema.Format" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
}

@*"type": "integer"*@
@*"type": "number"*@
@if (ComponentSchema.ComponentJsonSchema.Type == JSchemaType.Integer || ComponentSchema.ComponentJsonSchema.Type == JSchemaType.Number)
{
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("Maximum"))
    {
        <div class="componentproperty-item">
            <label>最大值：</label>
            <Input TValue="double?" @bind-Value="@ComponentSchema.ComponentJsonSchema.Maximum" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
    if (ComponentSchema.ComponentPropertySchema.IsShowProperty("Minimum"))
    {
        <div class="componentproperty-item">
            <label>最小值：</label>
            <Input TValue="double?" @bind-Value="@ComponentSchema.ComponentJsonSchema.Minimum" OnChange="(value) => OnPropertyChange()" />
        </div>
    }
}
@*"type": "array"*@
@*if(ComponentSchema.ComponentJSchema.Type == JSchemaType.Array)
{
        
}*@

@*自定义*@
<div class="componentproperty-item">
    <label>组件宽度：</label>
    <Slider TValue="double" @bind-Value="@ComponentSchema.ComponentPropertySchema.ItemWidth" DefaultValue="12" Min="4" Max="24" OnChange="(value) => OnPropertyChange()" />
</div>
<div class="componentproperty-item">
    <label>标签宽度：</label>
    <Slider TValue="double" @bind-Value="@ComponentSchema.ComponentPropertySchema.LabelWidth" DefaultValue="180" Min="4" Max="300" OnChange="(value) => OnPropertyChange()" />
</div>

@code {
    [Parameter]
    public ComponentSchema ComponentSchema { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        if (ComponentSchema == null)
            throw new NullReferenceException($"{ComponentSchema} is null");
    }

    private void OnPropertyChange()
    {
        BlazorEventDispatcher.Dispatch("designerengine.componentproperty.onchange", null);
    }
}
