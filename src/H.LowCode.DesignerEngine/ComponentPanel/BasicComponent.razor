@inject DragDropService DragDropService

@foreach(var model in DragModels)
{
    <DragItem DragDropModel="model" OnItemDragStart="OnItemDragStart"></DragItem>
}

@code {
    private List<DragDropModel> DragModels;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        DragModels = new List<DragDropModel>()
        {
            new DragDropModel(){
                Title = "输入框",
                ComponentType = "input",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(1, typeof(Input<string>));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "大输入框",
                ComponentType = "textarea",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(TextArea));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "日期选择",
                ComponentType = "datepicker",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(DatePicker<DateTime?>));
                    builder.AddAttribute(1, "Picker", DatePickerType.Date);
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "数字输入框",
                ComponentType = "inputnumber",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(AntDesign.InputNumber<int>));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "是否选择",
                ComponentType = "checkbox",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(Select<string, string>));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "是否switch",
                ComponentType = "switch",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(Switch));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "下拉选择",
                ComponentType = "radio",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(Radio<string>));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "点击选择",
                ComponentType = "datepicker",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(Checkbox));
                    builder.CloseComponent();
                }
            },
            new DragDropModel(){
                Title = "HTML",
                ComponentType = "html",
                DropRenderFragment = (builder) =>
                {
                    builder.OpenComponent(0, typeof(TextArea));
                    builder.CloseComponent();
                }
            }
        };
    }

    public void OnItemDragStart(DragDropModel model)
    {
        //设置当前拖拽项
        DragDropService.CurrentDragModel = model;
    }
}
